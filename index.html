<script>
const GITHUB_TOKEN = "PASTE_YOUR_GITHUB_TOKEN_HERE";
const OWNER = "joelrajworkmail-ship-it";
const REPO = "Noted";
const FILE_PATH = "audio/meeting.webm";

async function uploadAudioToGitHub(audioBlob) {
  const base64Data = await audioBlob.arrayBuffer().then(buffer =>
    btoa(String.fromCharCode(...new Uint8Array(buffer)))
  );

  const url = `https://api.github.com/repos/${OWNER}/${REPO}/contents/${FILE_PATH}`;

  const response = await fetch(url, {
    method: "PUT",
    headers: {
      "Authorization": `Bearer ${GITHUB_TOKEN}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      message: "Upload meeting audio",
      content: base64Data,
      committer: {
        name: "Meeting Bot",
        email: "bot@noted.ai"
      }
    })
  });

  if (!response.ok) {
    throw new Error("GitHub upload failed");
  }

  return `https://raw.githubusercontent.com/${OWNER}/${REPO}/main/${FILE_PATH}`;
}
</script>
